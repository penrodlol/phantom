---
import type { HTMLAttributes } from 'astro/types';
import { twMerge } from 'tailwind-merge';
import { tv, type VariantProps } from 'tailwind-variants';

export const variants = tv({
  base:
    'inline-flex items-center justify-center whitespace-nowrap rounded font-medium ' +
    'disabled:opacity-50 disabled:cursor-not-allowed ' +
    'focus-visible:ring-1 focus-visible:outline-none',
  defaultVariants: { color: 'primary', size: 'md' },
  variants: {
    color: {
      primary: '',
      secondary: '',
      outline: 'border hover:bg-surface-3 motion-safe:transition-colors',
      ghost: 'hover:bg-surface-3 motion-safe:transition-colors',
      danger: '',
    },
    size: {
      sm: 'h-8 px-3 text-sm',
      md: 'h-9 px-4 text-base',
      lg: 'h-10 px-8 text-lg',
      icon: 'size-8 *:size-4',
    },
  },
});

type Props = HTMLAttributes<'button'> & VariantProps<typeof variants>;

const { class: className, color, size, ...props } = Astro.props;
---

<button {...props} class={twMerge(variants({ color, size }), className)}><slot /></button>
